webpackJsonp([1],{"2Rtt":function(t,e){},BO6V:function(t,e){},Ltkn:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("fZjL"),n=i.n(a),o=i("7+uW"),r={name:"loading",data:function(){return{loadingImg:i("bAg2")}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container mask-full"},[e("div",{staticClass:"content box box-ac box-jc"},[e("img",{staticClass:"loading-img",attrs:{src:this.loadingImg,alt:""}})])])},staticRenderFns:[]};var s=i("VU/8")(r,c,!1,function(t){i("P/f/")},"data-v-23449f82",null).exports,g=i("NYxO"),l={name:"app",components:{loading:s},computed:Object(g.b)(["isLoading","routerAni"]),mounted:function(){},methods:{},watch:{$route:function(t,e){var i=t.path.length<e.path.length?"slide-right":"slide-left";this.$store.commit("routerAni",i)}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isLoading?e("loading"):this._e(),this._v(" "),e("transition",{attrs:{name:this.routerAni}},[e("router-view",{staticClass:"router-view"})],1)],1)},staticRenderFns:[]};var h=i("VU/8")(l,u,!1,function(t){i("2Rtt")},null,null).exports,d=i("/ocq"),p={},f=p.TiffTags={274:"Orientation"};function m(t){return!!t.exifdata}function v(t,e){function i(i){var a=function(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return!1;var i=2,a=t.byteLength;for(;i<a;){if(255!=e.getUint8(i))return!1;if(225==e.getUint8(i+1))return w(e,i+4,e.getUint16(i+2));i+=2+e.getUint16(i+2)}}(i);t.exifdata=a||{},e&&e.call(t)}if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var a=new FileReader;a.onload=function(t){i(t.target.result)},a.readAsArrayBuffer(t)}}function x(t,e,i,a,n){var o,r,c,s,g,l,u=t.getUint16(e+2,!n),h=t.getUint32(e+4,!n),d=t.getUint32(e+8,!n)+i;switch(u){case 1:case 7:if(1==h)return t.getUint8(e+8,!n);for(o=h>4?d:e+8,r=[],s=0;s<h;s++)r[s]=t.getUint8(o+s);return r;case 2:return b(t,o=h>4?d:e+8,h-1);case 3:if(1==h)return t.getUint16(e+8,!n);for(o=h>2?d:e+8,r=[],s=0;s<h;s++)r[s]=t.getUint16(o+2*s,!n);return r;case 4:if(1==h)return t.getUint32(e+8,!n);for(r=[],s=0;s<h;s++)r[s]=t.getUint32(d+4*s,!n);return r;case 5:if(1==h)return g=t.getUint32(d,!n),l=t.getUint32(d+4,!n),(c=new Number(g/l)).numerator=g,c.denominator=l,c;for(r=[],s=0;s<h;s++)g=t.getUint32(d+8*s,!n),l=t.getUint32(d+4+8*s,!n),r[s]=new Number(g/l),r[s].numerator=g,r[s].denominator=l;return r;case 9:if(1==h)return t.getInt32(e+8,!n);for(r=[],s=0;s<h;s++)r[s]=t.getInt32(d+4*s,!n);return r;case 10:if(1==h)return t.getInt32(d,!n)/t.getInt32(d+4,!n);for(r=[],s=0;s<h;s++)r[s]=t.getInt32(d+8*s,!n)/t.getInt32(d+4+8*s,!n);return r}}function b(t,e,i){for(var a="",n=e;n<e+i;n++)a+=String.fromCharCode(t.getUint8(n));return a}function w(t,e){if("Exif"!=b(t,e,4))return!1;var i,a=e+6;if(18761==t.getUint16(a))i=!1;else{if(19789!=t.getUint16(a))return!1;i=!0}if(42!=t.getUint16(a+2,!i))return!1;var n=t.getUint32(a+4,!i);return!(n<8)&&function(t,e,i,a,n){var o,r,c=t.getUint16(i,!n),s={};for(r=0;r<c;r++)o=i+12*r+2,s[a[t.getUint16(o,!n)]]=x(t,o,e,0,n);return s}(t,a,a+n,f,i)}p.getData=function(t,e){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(m(t)?e&&e.call(t):v(t,e),!0)},p.getTag=function(t,e){if(m(t))return t.exifdata[e]};var C=p,I=function(t,e){return Math.sqrt(Math.pow(t.pageY-e.pageY,2)+Math.pow(t.pageX-e.pageX,2))},S={name:"imageCropper",props:{callback:{type:Function,default:function(){}},cropperConfig:{type:Object,default:function(){return{width:1,height:1,quality:.7,maxWidth:640}}}},data:function(){return{coverHeight:0,cropperHeight:0,imgInitTop:0,amplitude:0,imageState:{left:0,top:0,scale:1,width:0,height:0,originX:0,originY:0},distance:0,imageStyle:{top:"0",transform:"translate3d(0px, 0px, 0px) scale(1)",transformOrigin:"left top"},cropBoxRect:{},touchPos:{x:0,y:0},isShow:!1,minScale:0,info:"",orientation:""}},watch:{imageState:{handler:function(t,e){this.imageStyle.transform="translate3d(-"+t.left+"px, -"+t.top+"px, 0px) scale("+t.scale+")"},deep:!0}},methods:{cancel:function(){this.file=null,this.isShow=!1},checkPhoto:function(){this.$refs.file.click()},readImage:function(t){this.$store.commit("isLoading",!0);var e=this,i=t.target.files[0],a=new window.FileReader;a.onload=function(){C.getData(i,function(){var i=C.getTag(this,"Orientation");i||(i=1),console.log("orientation>>>",i),e.orientation=i,e.$refs.img.onload=function(){e.$store.commit("isLoading",!1),e.initCropper()},e.$refs.img.src=a.result,t.target.value=null})},a.readAsDataURL(i)},initCropper:function(){var t=this;this.isShow=!0,this.$nextTick(function(){var e=t.$refs.cropperPage,i=e.clientWidth,a=e.clientHeight,n=t.$refs.cropBox.clientWidth,o=Math.floor(n*+t.cropperConfig.height/+t.cropperConfig.width);t.$refs.cropBox.style.height=o+"px",t.coverHeight=(a-o)/2;var r=t.coverHeight;t.imageState.left=0,t.imageState.top=0,t.imageStyle.top=r+"px",t.cropBoxRect={left:0,top:r,width:i,height:o};var c=t.$refs.img,s=t.imageState.width=c.naturalWidth,g=t.imageState.height=c.naturalHeight;s>g?(t.minScale=t.imageState.scale=t.cropBoxRect.height/g,t.imageState.left=(s*t.imageState.scale-t.cropBoxRect.width)/2):(t.minScale=t.imageState.scale=t.cropBoxRect.width/s,t.imageState.top=(g*t.imageState.scale-t.cropBoxRect.height)/2)})},confirm:function(){var t=this.imageState,e=this.cropBoxRect,i=this.cropperConfig.maxWidth,a=i/e.height,n=t.scale*a,o=i,r=e.height*a,c=t.left*a,s=t.top*a,g=this.$refs.img,l=document.createElement("canvas"),u=l.getContext("2d");switch(this.orientation){case 1:l.width=o,l.height=r,u.drawImage(g,c/n,s/n,o/n,r/n,0,0,o,r);break;case 6:l.width=r,l.height=o,u.rotate(90*Math.PI/180),u.drawImage(g,c/n,s/n,o/n,r/n,0,-r,o,r);break;case 8:l.width=r,l.height=o,u.rotate(-90*Math.PI/180),u.drawImage(g,c/n,s/n,o/n,r/n,-o,0,o,r);break;case 3:l.width=o,l.height=r,u.rotate(180*Math.PI/180),u.drawImage(g,c/n,s/n,o/n,r/n,-o,-r,o,r)}var h=l.toDataURL("image/jpeg",this.cropperConfig.quality);this.callback(h),this.isShow=!1},getFocalPoint:function(t,e){return{x:(t.pageX+e.pageX)/2,y:(t.pageY+e.pageY)/2}},touchStart:function(t){var e=t.touches.length;if(e){var i=t.touches[0];this.touchPos={x:i.clientX,y:i.clientY}}if(e>=2){var a=t.touches[0],n=t.touches[1];this.distance=I(a,n),this.touchPos=this.getFocalPoint(a,n)}},touchMove:function(t){var e=t.touches.length,i=t.touches[0];if(1===e){var a=i.pageX-this.touchPos.x,n=i.pageY-this.touchPos.y,o=this.imageState.left-a,r=this.imageState.top-n,c=this.imageState.scale,s=this.imageState.width*c-this.cropBoxRect.width,g=this.imageState.height*c-this.cropBoxRect.height;this.imageState.left=o<0?0:o>s?s:o,this.imageState.top=r<0?0:r>g?g:r,this.touchPos.x=i.pageX,this.touchPos.y=i.pageY}else if(e>1){var l=t.touches[0],u=t.touches[1],h=I(l,u),d=h/this.distance,p=d*this.imageState.scale,f=this.imageState.width*p-this.cropBoxRect.width,m=this.imageState.height*p-this.cropBoxRect.height,v=this.getFocalPoint(l,u),x=d*(this.imageState.left+v.x)-v.x,b=d*(this.imageState.top-this.imgInitTop+v.y)-v.y+this.imgInitTop;this.distance=h,p<this.minScale?this.imageState.scale=this.minScale:(this.imageState.scale=p,this.imageState.left=x<0?0:x>f?f:x,this.imageState.top=b<0?0:b>m?m:b),this.touchPos=v}},touchEnd:function(t){}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"cropperPage",staticClass:"cropper-page"},[i("div",{staticClass:"icon icon-back",on:{click:function(e){t.cancel()}}}),t._v(" "),i("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.readImage}}),t._v(" "),i("img",{ref:"img",staticClass:"cropper-img",style:t.imageStyle,attrs:{alt:""}}),t._v(" "),i("div",{staticClass:"cover box box-ac box-jc",style:{height:t.coverHeight+"px"}},[t._v("\n    请调整图片\n  ")]),t._v(" "),i("div",{ref:"cropBox",staticClass:"cropper-box",on:{touchstart:function(e){return e.preventDefault(),t.touchStart(e)},touchmove:function(e){return e.preventDefault(),t.touchMove(e)},touchend:function(e){return e.preventDefault(),t.touchEnd(e)}}}),t._v(" "),i("div",{staticClass:"cover cover box box-ac box-jc",style:{height:t.coverHeight+"px"}},[i("div",{staticClass:"box box-f1 box-jc box-fh"},[i("div",{staticClass:"btn",on:{click:t.checkPhoto}},[t._v("重选")])]),t._v(" "),i("div",{staticClass:"box box-f1 box-jc box-fh"},[i("div",{staticClass:"btn sure",on:{click:t.confirm}},[t._v("确定")])])])])},staticRenderFns:[]};var M={name:"index",components:{imageCropper:i("VU/8")(S,y,!1,function(t){i("euK4")},"data-v-f0c0048c",null).exports},data:function(){return{images:[],cropperConfig:{width:1,height:1,quality:.7,maxWidth:750}}},mounted:function(){},methods:{selectFile:function(){this.$refs.imageCropper.checkPhoto()},loadImage:function(t){console.log(t),this.images.push(t)},uploadImg:function(){alert("上传")}}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t._l(t.images,function(t,e){return i("img",{key:e,staticClass:"box",attrs:{value:t,src:t}})}),t._v(" "),i("div",{staticClass:"setting"},[i("div",{staticClass:"box box-ver"},[i("div",{staticClass:"box box-fh line box-ac"},[t._v("\n        裁剪宽度：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.width,expression:"cropperConfig.width"}],staticClass:"box box-f1",attrs:{placeholder:"width",type:"tel"},domProps:{value:t.cropperConfig.width},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"width",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"box  box-fh line box-ac"},[t._v("\n        裁剪高度：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.height,expression:"cropperConfig.height"}],staticClass:"box box-f1",attrs:{placeholder:"height",type:"tel"},domProps:{value:t.cropperConfig.height},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"height",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"box  box-fh line box-ac"},[t._v("\n        图片质量：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.quality,expression:"cropperConfig.quality"}],staticClass:"box box-f1",attrs:{placeholder:"height",type:"tel"},domProps:{value:t.cropperConfig.quality},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"quality",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"box  box-fh line box-ac"},[t._v("\n        最大宽度：\n        "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.cropperConfig.maxWidth,expression:"cropperConfig.maxWidth"}],staticClass:"box box-f1",attrs:{placeholder:"height",type:"tel"},domProps:{value:t.cropperConfig.maxWidth},on:{input:function(e){e.target.composing||t.$set(t.cropperConfig,"maxWidth",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"box box-ac box-jc"},[i("div",{staticClass:"btn",on:{click:function(e){t.selectFile()}}},[t._v("选择图片")]),t._v(" "),i("div",{staticClass:"btn",on:{click:function(e){t.uploadImg()}}},[t._v("上传")])])]),t._v(" "),i("image-cropper",{ref:"imageCropper",attrs:{cropperConfig:t.cropperConfig,callback:t.loadImage}})],2)},staticRenderFns:[]};var P=i("VU/8")(M,A,!1,function(t){i("BO6V")},"data-v-e9c3858e",null).exports;o.a.use(d.a);var D=new d.a({routes:[{path:"/",name:"case",component:P}]});o.a.use(g.a);var _,T,U=new g.a.Store({state:{isLoading:!1,routerAni:""},getters:{isLoading:function(t){return t.isLoading}},mutations:{routerAni:function(t,e){t.routerAni=e},isLoading:function(t,e){t.isLoading=e}},actions:{}});_="orientationchange"in window?"orientationchange":"resize",(T=function(){var t;document.getElementsByTagName("html")[0].setAttribute("style","font-size:"+(t=(document.body||document.documentElement).clientWidth,Math.floor(t/7.5))+"px")})(),window.addEventListener(_,T,!1);var B=i("//Fk"),R=i.n(B),E=i("mtWM"),L=i.n(E),k=i("mw3O"),H=i.n(k),$=i("rdLu"),Y=i.n($),F=(i("Ltkn"),{alert:'<div data-mask="1" class="pop-container box box-ac box-pc animated fadeIn" data-close-ani="bounceOut"><div class="alert box box-ver animated bounceIn pop-content"><% if (title) { %><div  class="alert-title box box-pc"><%- title?title:"提示" %></div><% } %><div class="alert-content box box-pc"><%= content?content:"确定？" %></div><% if (buttons.length>0) { %><div class="alert-buttons box"><% _.each(buttons, function(item, i){  %><div data-index="<%= i %>" class="box box-ac box-pc box-f1 box-fh alert-button"><%= item %></div><% }) %></div><% } %></div></div>',toast:'<div class="tools-toast"><%- msg?msg:"加载中..." %></div>',loading:'<div class="tools-loading"><div class=".loading-content"><div class="icon-loading"></div><div class="text"></div></div></div>'});function N(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]}function W(t){var e=F.toast,i=N(Y.a.template(e)(t));document.body.appendChild(i),t.duration&&setTimeout(function(){i.parentNode.removeChild(i)},t.duration)}function j(t){var e={};if("post"===t.method)if(e=t.data,"formData"===t.type){var i=new FormData;for(var a in e)i.append(a,e[a]);e=i}else e=H.a.stringify(t.data);return new R.a(function(i,a){U.commit("isLoading",!0),L()({method:t.method?t.method:"get",url:""+t.url,data:e,params:"post"===t.method?{}:t.data,headers:{"X-Requested-With":"XMLHttpRequest","Content-type":"formData"===t.type?"application/form-data;charset=utf-8":"application/x-www-form-urlencoded;charset=utf-8"}}).then(function(e){U.commit("isLoading",!1),200===e.status?(console.log(t.url.split("/").pop()+">>>",e.data),i(e.data),1!==e.data.status&&W({msg:e.data.message,duration:1500})):W({msg:"请求失败 status: "+e.status,duration:1500})}).catch(function(t){U.commit("isLoading",!1),a?a(t):(W({msg:"服务器凌乱了",duration:1500}),console.log("common error func"))})})}o.a.use({install:function(){o.a.prototype.$http=j}});i("ksBL");var X=i("vgQg"),Z=i.n(X);var q={formatDate:function(t){if(!t)return"";t instanceof Date||(t=new Date(t));var e=+t,i=+new Date-e;return i<864e5?String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0"):i<=1728e5?"昨天":i<=6048e5?"星期"+["日","一","二","三","四","五","六"][t.getDay()]:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}};o.a.config.productionTip=!1,n()(q).forEach(function(t){o.a.filter(t,q[t])}),o.a.prototype.$config=Z.a,D.beforeEach(function(t,e,i){document.querySelector("title").innerHTML=t.name,i()});new o.a({el:"#app",router:D,store:U,template:"<App/>",components:{App:h}})},"P/f/":function(t,e){},bAg2:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgPHBhdGggb3BhY2l0eT0iLjI1IiBkPSJNMTYgMCBBMTYgMTYgMCAwIDAgMTYgMzIgQTE2IDE2IDAgMCAwIDE2IDAgTTE2IDQgQTEyIDEyIDAgMCAxIDE2IDI4IEExMiAxMiAwIDAgMSAxNiA0Ii8+CiAgPHBhdGggZD0iTTE2IDAgQTE2IDE2IDAgMCAxIDMyIDE2IEwyOCAxNiBBMTIgMTIgMCAwIDAgMTYgNHoiPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMTYgMTYiIHRvPSIzNjAgMTYgMTYiIGR1cj0iMC44cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+CiAgPC9wYXRoPgo8L3N2Zz4K"},euK4:function(t,e){},ksBL:function(t,e){},vgQg:function(t,e,i){}},["NHnr"]);